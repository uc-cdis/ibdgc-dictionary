$schema: "http://json-schema.org/draft-04/schema#"

id: "sample"
title: Sample
type: object
namespace: https://ibdgc.datacommons.io/
category: biospecimen
program: '*'
project: '*'
description: >
  Any material sample taken from a biological entity for testing, diagnostic, propagation, treatment
  or research purposes, including a sample obtained from a living organism or taken from the
  biological object after halting of all its life functions. Biospecimen can contain one or more
  components including but not limited to cellular molecules, cells, tissues, organs, body fluids,
  embryos, and body excretory products.
additionalProperties: false
submittable: true
validators: null

systemProperties:
  - id
  - project_id
  - state
  - created_datetime
  - updated_datetime

required:
  - submitter_id
  - sample_type
  - cases
  - type

uniqueKeys:
  - [id]
  - [project_id, submitter_id]

links:
  - name: cases
    backref: samples
    label: derived_from
    target_type: case
    multiplicity: many_to_one #not sure
    required: true

# Sample properties
# Currently there are many TCGA-specific fields in the DB, this is an attempt
# to minimize the core fields
properties:
  type:
    type: string
  id:
    $ref: "_definitions.yaml#/UUID"
    systemAlias: node_id
  state:
    $ref: "_definitions.yaml#/state"
  submitter_id:
    type:
      - string
      - "null"
    description: >
      DCC-generated sample barcode or other local sample identifier.
  biospecimen_anatomic_site:
    term:
      $ref: "_terms.yaml#/biospecimen_anatomic_site"
    enum:
      - Blood
  days_to_collection:
    term:
      $ref: "_terms.yaml#/days_to_collection"
    type: integer
  sample_type:
    term:
      $ref: "_terms.yaml#/sample_type"
    enum:
      - DNA
  cases:
    #should this be to_one
    $ref: "_definitions.yaml#/to_one"
    description: >
      Indicates that the sample is physically derived from the subject
      of the linked to case via some process/protocol
  project_id:
    type: string
  created_datetime:
    $ref: "_definitions.yaml#/datetime"
  updated_datetime:
    $ref: "_definitions.yaml#/datetime"
